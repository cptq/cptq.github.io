<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="theme-color" content="#FFF2FC">
	<meta name="msapplication-TileColor" content="#FFF2FC">
<meta itemprop="name" content="Flags Ranked by Matrix Rank">
<meta itemprop="description" content="One day I was watching a lecture, and the lecturer noted that the flags of some nations, when viewed as matrices, have quite low rank, in the sense of the standard concept from linear algebra. I found this remark pretty amusing, so I set out to compute the ranks of some flags. The flag of Bolivia has rank one, since all of its columns are the same and hence any two columns are linearly dependent."><meta itemprop="datePublished" content="2020-03-27T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-03-27T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="1664">
<meta itemprop="keywords" content="" /><meta property="og:title" content="Flags Ranked by Matrix Rank" />
<meta property="og:description" content="One day I was watching a lecture, and the lecturer noted that the flags of some nations, when viewed as matrices, have quite low rank, in the sense of the standard concept from linear algebra. I found this remark pretty amusing, so I set out to compute the ranks of some flags. The flag of Bolivia has rank one, since all of its columns are the same and hence any two columns are linearly dependent." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cptq.github.io/posts/flags/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-03-27T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2020-03-27T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Flags Ranked by Matrix Rank"/>
<meta name="twitter:description" content="One day I was watching a lecture, and the lecturer noted that the flags of some nations, when viewed as matrices, have quite low rank, in the sense of the standard concept from linear algebra. I found this remark pretty amusing, so I set out to compute the ranks of some flags. The flag of Bolivia has rank one, since all of its columns are the same and hence any two columns are linearly dependent."/>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>Flags Ranked by Matrix Rank</title>
	<link rel="stylesheet" href="https://cptq.github.io/css/style.min.d3dfda823ff1cc9b72efb37de41f475faccde98c8ead2f64e571e72700608547.css" integrity="sha256-09/agj/xzJty77N95B9HX6zN6YyOrS9k5XHnJwBghUc=" crossorigin="anonymous">
	
</head>

<body id="page">
	
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
	<header id="site-header" class="animated slideInUp faster">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="https://cptq.github.io">Derek Lim</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					
				<a href="https://cptq.github.io/about/">About</a>
				<a href="https://cptq.github.io/papers/">Papers</a>
				<a href="https://cptq.github.io/posts/">Posts</a>
				<a href="https://cptq.github.io/other/">Other</a>

				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<span class="hdr-social hide-in-mobile"><a href="/contact/" target="_blank" rel="noopener me" title="Email"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></a><a href="https://github.com/cptq" target="_blank" rel="noopener me" title="Github"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a><a href="https://www.linkedin.com/in/lim-derek/" target="_blank" rel="noopener me" title="Linkedin"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg></a><a href="https://twitter.com/dereklim_lzh" target="_blank" rel="noopener me" title="Twitter"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a><a href="https://scholar.google.com/citations?user=jvMqp3sAAAAJ" target="_blank" rel="noopener me" title="Scholar"><img src="/scholar.png" width="24" height="24"> </img></a></span><button id="menu-btn" class="hdr-btn" title="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://cptq.github.io/about/">About</a></li>
			<li><a href="https://cptq.github.io/papers/">Papers</a></li>
			<li><a href="https://cptq.github.io/posts/">Posts</a></li>
			<li><a href="https://cptq.github.io/other/">Other</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster">
		<article class="thin">
			<header class="post-header">
				<div class="post-meta"><span>Mar 27, 2020</span></div>
				<h1>Flags Ranked by Matrix Rank</h1>
			</header>
			<div class="content">
				<p>One day I was watching a lecture, and the lecturer noted that the flags of some nations, when viewed as matrices, have quite low <a href="https://en.wikipedia.org/wiki/Rank_(linear_algebra)">rank</a>, in the sense of the standard concept from linear algebra. I found this remark pretty amusing, so I set out to compute the ranks of some flags. The flag of Bolivia has rank one, since all of its columns are the same and hence any two columns are linearly dependent. The flag of Sweden has rank two; there are two types of columns: the all yellow ones and the ones with a blue top, yellow middle, and blue bottom, and these two types of columns are linearly independent. The rank of some flags cannot be computed by hand, so I collected some images of flags and wrote some scripts to compute them.</p>
<figure>
<img src="BO.svg" width=30%>
<figcaption>
Flag of Bolivia
</figcaption>
</figure>
<p><br></br></p>
<figure>
<img src="SE.svg" width=30%>
<figcaption>
Flag of Sweden
</figcaption>
</figure>
<h2 id="flag-images">Flag Images<a href="#flag-images" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>Luckily for me, there was some nice data available that worked perfectly for this task. Wikimedia hosts svg files with the flags of all sorts of territories and states under a consistent format. What I did at first was directly scrape the flags of sovereign states from some Wikipedia lists. After running some computations on these, I came across <a href="https://github.com/google/region-flags">this</a> repository of region flags by Google, which has the Wikipedia flags including some US state and Canadian province flags that I did not have. Thus, I started using these svg files instead. In total, we have 326 flags (with some duplicates due to, for example, Bouvet Island using the flag of Norway). I converted each svg to a png file to allow for the analysis of each flag as a matrix of pixels. Technically, the flag pngs are not quite matrices of pixels, as each pixel has a red, green, and blue value. We simply map these images to grayscale to analyze themâ€”as far as I can tell, there are no overlaps in which two colors map to the same grayscale value.</p>
<h2 id="ranks-and-complexity-of-flags">Ranks and Complexity of Flags<a href="#ranks-and-complexity-of-flags" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>There is no doubt that the flags of low rank are simple and easy to unambiguously define. Any <span class="math inline">\(m \times n\)</span> real matrix of rank <span class="math inline">\(k\)</span> can be written as a sum of outer products <span class="math inline">\(\sum_{j=1}^k x_j y_j^T\)</span>, where <span class="math inline">\(x_j \in \mathbb{R}^m\)</span> and <span class="math inline">\(y_j \in \mathbb{R}^n\)</span>, so <span class="math inline">\(k(m+n)\)</span> real numbers specify the whole matrix. In fact, all that one has to do to describe the flags of Bolivia and Sweden is to specify a few colors and lines. However, the inverse is certainly not trueâ€”not all flags of high rank are complex. This is to be expected by basic linear algebra: any <span class="math inline">\(n \times n\)</span> diagonal matrix with nonzero diagonal is full rank yet can be fully specified by an <span class="math inline">\(n\)</span>-tuple of elements. In the same vein, the flag of the Republic of Congo is full rank due to its diagonal structure, yet it is composed of just three lines.</p>
<figure>
<img src="CG.svg" width=30%> </img>
<figcaption>
Flag of the Republic of the Congo
</figcaption>
</figure>
<p>Another measure of complexity of a flag is given by the size in bytes of the flagâ€™s svg file. The Republic of Congoâ€™s svg is only 416 bytes, placing it as only the 183rd largest file in our set. After doing my analysis, I found <a href="https://lascarides.github.io/fussyflags/">this blog post</a> which also ranks country flags by their svg fileâ€™s size in bytes, and funnily enough does so by using the size of Palauâ€™s svg file as the smallest unit of measurement.</p>
<p>To compute ranks of the grayscale images, I simply use the <code>rank</code> function with default parameters in Juliaâ€™s default LinearAlgebra library. This function works by defining the rank as the number of singular values of <span class="math inline">\(A\)</span> that have magnitude greater than <span class="math inline">\(k \cdot \epsilon \cdot \sigma_1\)</span>, where <span class="math inline">\(k\)</span> is the smaller of number of rows and number of columns of <span class="math inline">\(A\)</span>, <span class="math inline">\(\epsilon\)</span> is <a href="https://en.wikipedia.org/wiki/Machine_epsilon">machine epsilon</a>, and <span class="math inline">\(\sigma_1\)</span> is the largest singular value of <span class="math inline">\(A\)</span>. Due to numerical error, the results are not perfect (e.g.Â we find that it computes the rank of the <span class="math inline">\(2 \times 200\)</span> matrix with all elements equal to <span class="math inline">\(\pi\)</span> as rank two), but we find that they are accurate in all low-rank examples besides Switzerland, for which the computed rank is 5 but the actual rank is 3.</p>
<figure>
<img src="CH.svg" width=30%></img>
<figcaption>
Flag of Switzerland
</figcaption>
</figure>
<p>Since flags have different aspect ratios and require different resolutions, the matrices are of different sizes, which makes a direct comparison of rank to be unfair. Thus, we instead consider the ratio between the rank and the maximum possible rank given the size of the matrix, <span class="math inline">\(\frac{\mathrm{rank}(A)}{\min(m,n)}\)</span>, which we call the <em>percent rank</em> of the <span class="math inline">\(m \times n\)</span> matrix <span class="math inline">\(A\)</span>.</p>
<p>Altogether, <span class="math inline">\(15\)</span> flags have full rank and <span class="math inline">\(43\)</span> flags have rank one. Every one of the flags with full rank has some diagonal structure extending along an entire diagonal. While some of these full rank flags are simple like the Republic of Congoâ€™s, some of them areâ€”in my eyesâ€”deserving of full rank, like Bhutanâ€™s. The distribution of percent ranks covers much of <span class="math inline">\([0,1]\)</span>, with some bias towards rank one and full rank values.</p>
<figure>
<img src="prank_distr.svg"></img>
<figcaption>
Distribution of percent rank
</figcaption>
</figure>
<p><br></br></p>
<figure>
<img src="full_rank.png"> </img>
<figcaption>
Full rank flags
</figcaption>
</figure>
<p>Looking at the flags of lowest rank, we see some interesting patterns in choices by flag designers. Each rank one flag either consists of only horizontal or only vertical lines. None of these rank one flags have more than four different colors, and none of them have more than five lines. A lot of territories fly the flag of France. There are two different types of rank two flags: a bicolored flag with a cross and a multicolored flag with one vertical line with a few horizontal lines. The rank three flags either have an outlined cross or Switzerlandâ€™s cross that does not extend to the edges of the flag.</p>
<figure>
<img src="rank_one.svg"> </img>
<figcaption>
Rank one flags (all scaled to 2:3 aspect ratio)
</figcaption>
</figure>
<p><br></p>
<figure>
<img src="rank_two.svg"> </img>
<figcaption>
Rank two flags
</figcaption>
</figure>
<p><br></p>
<figure>
<img src="rank_3.svg"> </img>
<figcaption>
Rank three flags
</figcaption>
</figure>
<p>We find that rank and percent rank have a nice, somewhat linear positive relationship. Also, filesize and percent rank have a somewhat positive relationship, but there is clearly a lot of deviation in which flags with low filesize have high percent rank. However, the flags with the largest filesizes do tend to have large ranks; the complexity of an svg file describing a low rank flag is just never that high. It is easy to imagine a pathological case in which a flag is solely composed of a massive amount of thin horizontal lines, in which case we have a rank one flag with a large filesize. For some reason, no state has used such a flag.</p>
<figure>
<img src=pathological_flag.svg> </img>
<figcaption>
An example pathological flag: a rank one flag with a 656KB svg file.
</figcaption>
</figure>
<p><br></br></p>
<figure>
<img src=rank_vs_prank.svg> </img>
<figcaption>
Rank vs.Â percent rank (Pearson correlation .649)
</figcaption>
</figure>
<p><br></br></p>
<figure>
<img src=fsize_vs_prank.svg> </img>
<figcaption>
Filesize vs.Â percent rank (Pearson correlation .317)
</figcaption>
</figure>
<p>Looking at the flags with the largest filesize, we see an assortment of flags with complex symbols and drawings.</p>
<figure>
<img src="top_svg_fsize.png"></img>
<figcaption>
Largest filesize flags
</figcaption>
</figure>
<p>Some of these large filesize flags still do not have very high rank. The flag of Pennsylvania has filesize 775,498 bytes and 62% rank, so it has the second largest filesize but merely 107th largest percent rank. While it has a detailed seal, the seal does not take up the whole flag, so it has many linearly dependent rows that are just entirely blue.</p>
<p>The case of Pennsylvania gives some nice intuition on these two flag complexity metrics, and suggests another way to measure complexity. We can measure each flag with a combination of these two metrics by taking the sum of the position (a better term would be rank or positional rank, but that would be confusing in the context of the linear rank) as measured by filesize with the position as measured by percent rank. Another way to combine the ranks would be through something like a <a href="https://en.wikipedia.org/wiki/Rank_product">rank product</a>, but the simple sum maintains integer values. Here are the most complex flags as measured by this metric.</p>
<figure>
<img src="top_pos.png"> </img>
<figcaption>
Top 12 flags by position sum
</figcaption>
</figure>
<p>These flags do not just have detailed symbols and drawings, but in fact they have large drawings that span significant portions of the flag, or at least diagonal lines that do. Pennsylvania falls to position 27 in this ranking, but other flags like North Dakotaâ€™s (position 4) have a seal in the middle with a lot of empty columns; the difference is that North Dakotaâ€™s seal takes up a larger portion of the vertical space of the flag, so there are many linearly independent rows. There are still some flags that somewhat hack this ranking. The flag of Florida (position 1) has a small seal, but it has diagonal lines that give it full rank.</p>
<h2 id="without-us-states-and-canadian-provinces">Without US States and Canadian Provinces<a href="#without-us-states-and-canadian-provinces" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>For anyone who does not care for US State or Canadian provinces, we also compute the filesize and position sum rankings after omitting flags for these subregions. Note that no US State or Canadian province flags have low-rank, while many have large filesizes. Some regions change relative order in position sum after omitting the subregions, in part due to omission of subregions making the filesize rankings more compact. For instance, Saint Pierre and Miquelon is now position 1, even though it was behind Tristan da Cunha when subregions were included.</p>
<figure>
<img src="nosubregion_top_svg_fsize.png"> </img>
<figcaption>
Top 12 non-subregion flags by filesize
</figcaption>
</figure>
<p><br></br></p>
<figure>
<img src="nosubregion_top_pos.png"> </img>
<figcaption>
Top 12 non-subregion flags by position sum
</figcaption>
</figure>
<h2 id="thoughts">Thoughts<a href="#thoughts" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>The ranking of flag complexity by the sum of the rankings by percent rank and filesize seems pretty fair to me. I especially feel that the flag of Saint Pierre and Miquelon is deserving of the top spot, as it has neat designs that take up the whole flag. I am somewhat disappointed by the lack of variety in the designs of the flags of rank at most 3, but this is understandable given that flag designers probably did not care much for the rank of their flags. This type of computation would probably be pretty interesting for other types of flags and graphics. For example, the checkered flags used in auto racing have rank two and have a design distinct from the two types of rank two region flags.</p>

			</div>
			<hr class="post-end">
			<footer class="post-info">
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>1664 Words</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2020-03-26 20:00 -0400</p>
			</footer>
		</article>
		<div class="post-nav thin">
			<a class="next-post" href="https://cptq.github.io/posts/universal_invariant/">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>&nbsp;Newer</span><br><span>Universal Invariant Networks Through a Nice Commutative Diagram</span>
			</a>
			<a class="prev-post" href="https://cptq.github.io/posts/eigart/">
				<span class="post-nav-label">Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><br><span>Endless Eigenart in 3 lines of code</span>
			</a>
		</div>
		<div id="comments" class="thin">
</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2025 <a href="https://cptq.github.io">Derek Lim</a></p>
		<p>
			Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> &#183; Theme <a href="https://github.com/Track3/hermit" target="_blank" rel="noopener">Hermit</a>
			
		</p>
	</footer>



	<script src="https://cptq.github.io/js/bundle.min.7d8545daa55d62427355498dd8da13f98ff79a7938ce7d2a5e2ae1ec0de3beb8.js" integrity="sha256-fYVF2qVdYkJzVUmN2NoT+Y/3mnk4zn0qXirh7A3jvrg=" crossorigin="anonymous"></script>
	

</body>

</html>
